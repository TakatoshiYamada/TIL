# 30th June 2023 

- [30th June 2023](#30th-june-2023)
  - [SQL](#sql)
    - [開発用DBから詳細テーブルの情報を取り出したい。どういうSQLを書けばいい？](#開発用dbから詳細テーブルの情報を取り出したいどういうsqlを書けばいい)
    - [no database selectedって出る](#no-database-selectedって出る)
    - [nameがtestのデータを取得したい](#nameがtestのデータを取得したい)
  - [ruby](#ruby)
    - [rubyにてopen3.rb execでエラーが出た。Errno::ENOENTとも出てる](#rubyにてopen3rb-execでエラーが出たerrnoenoentとも出てる)
  - [Err](#err)
    - [/usr/local/jdk1.5.0\_07/bin/java -jar 「multiaribjpegconverter.jarのディレクトリ」だからjarがないのかな](#usrlocaljdk150_07binjava--jar-multiaribjpegconverterjarのディレクトリだからjarがないのかな)
    - [jdkのバージョンってどこを調べればいいの](#jdkのバージョンってどこを調べればいいの)
    - [jdk1.5.0\_07をインストールしないといけないことがわかった。](#jdk150_07をインストールしないといけないことがわかった)
    - [開発サーバにバイナリではないけど、同じバージョンがディレクトリとして存在しているのを確認した。そのままscpで持ってくるだけで使える？](#開発サーバにバイナリではないけど同じバージョンがディレクトリとして存在しているのを確認したそのままscpで持ってくるだけで使える)
    - [Linuxのどこかにjdkのtarがないか検索したい。](#linuxのどこかにjdkのtarがないか検索したい)
    - [Javaがパス通ってるか確認したい](#javaがパス通ってるか確認したい)
    - [jvmディレクトリに違うバージョンのjdkが二つあってもいいの、](#jvmディレクトリに違うバージョンのjdkが二つあってもいいの)
    - [/usr/localからlibにシンボリックリンクをつけたい](#usrlocalからlibにシンボリックリンクをつけたい)
      - [error while loading shared libraries libjli.so cannot open shared object file no suchってエラーが出た](#error-while-loading-shared-libraries-libjliso-cannot-open-shared-object-file-no-suchってエラーが出た)
  - [fastcgi](#fastcgi)
    - [fastcgiって何だっけ](#fastcgiって何だっけ)

## SQL

### 開発用DBから詳細テーブルの情報を取り出したい。どういうSQLを書けばいい？

詳細テーブルの全ての情報を取得したい場合、以下のようなSQLクエリを使用できます：

sql
SELECT * FROM 詳細テーブル;

ただし、特定の情報だけを取得したい場合は、カラム名を指定する必要があります。例えば、name と age のカラムだけを取得したい場合は、以下のようにします：

sql
SELECT name, age FROM 詳細テーブル;

さらに、特定の条件を満たす行だけを取得したい場合は、WHERE 句を使用します。例えば、age が20より大きいレコードだけを取得する場合は、以下のようにします：

sql
SELECT * FROM 詳細テーブル WHERE age > 20;

これらは基本的なSQLクエリの例で、あなたが何をしたいかによってクエリは変わります。より具体的なニーズがあれば教えてください。

### no database selectedって出る

"no database selected"というエラーは、SQLクエリを実行する前に特定のデータベースを選択していないことを示しています。そのため、まずデータベースを選択する必要があります。

MySQLを使用している場合、以下のSQLコマンドでデータベースを選択できます：

sql
USE データベース名;

このコマンドは、データベース名という名前のデータベースを選択します。このコマンドの後に、テーブルからデータを取得するSQLクエリを実行することができます。

### nameがtestのデータを取得したい

nameがtestであるデータを取得するためには、以下のようなSQLクエリを使用します：

sql
USE データベース名; -- まずは適切なデータベースを選択
SELECT * FROM 詳細テーブル WHERE name = 'test'; -- 次にクエリを実行

このクエリは、詳細テーブルからnameカラムの値がtestであるすべてのレコードを取得します。カラム名やテーブル名、データベース名はあなたの環境に合わせて適宜書き換えてください。

## ruby

### rubyにてopen3.rb execでエラーが出た。Errno::ENOENTとも出てる

Errno::ENOENTエラーは、通常、Rubyが指定されたファイルやディレクトリを見つけられないときに発生します。open3.rb execを使用しているとのことなので、恐らくはexecに渡しているコマンドやファイルが存在しない、または正しく指定されていない可能性が高いです。

以下は一般的な対処法です：

execに渡しているコマンドやパスが正しいか確認してください。コマンドがシステムパス上に存在するか、もしくは絶対パスを使用しているか確認してみてください。

ファイルのパーミッションが適切に設定されているか確認してください。Rubyがファイルを読み込んだり実行したりするためには、適切な読み取りおよび実行パーミッションが必要です。

エラーメッセージ全体を確認して、どのファイルやディレクトリが見つからないのかを確認してください。エラーメッセージは通常、問題のあるファイルやディレクトリの名前を含んでいます。

具体的なコードや実行しているコマンドを教えていただけると、より具体的な助言が可能となります。

## Err

### /usr/local/jdk1.5.0_07/bin/java -jar 「multiaribjpegconverter.jarのディレクトリ」だからjarがないのかな

Errno::ENOENTエラーが出ているのであれば、それは指定されたファイルまたはディレクトリが見つからないことを示しています。

この場合、以下の確認をしてみてください：

multiaribjpegconverter.jarファイルが実際に存在していること。その際にファイル名のスペルミスも確認してみてください。

multiaribjpegconverter.jarのディレクトリパスが正しいこと。絶対パスを使用している場合、そのパスが正確であることを確認してください。

javaコマンドのパスが正しいこと。/usr/local/jdk1.5.0_07/bin/javaが存在し、実行可能であることを確認してください。

上記の全てを確認した上で、それでも同じエラーが出る場合は、Rubyからシェルコマンドを実行する際のコード（おそらくOpen3を使っている部分）を見直してみてください。

以下のようなコードでシェルコマンドを実行することが可能です：

```ruby
require 'open3'
Open3.popen3('/usr/local/jdk1.5.0_07/bin/java -jar /path/to/multiaribjpegconverter.jar') do |stdin, stdout, stderr, wait_thr|
  # ここで標準出力やエラー出力を取得・処理できます
end
```

上記の/path/to/multiaribjpegconverter.jar部分は、あなたのmultiaribjpegconverter.jarファイルが存在する正確なパスに置き換えてください。

### jdkのバージョンってどこを調べればいいの

JDKのバージョンを確認するには、コマンドラインから以下のコマンドを実行します：

bash
java -version

このコマンドは、インストールされているJavaのバージョン情報を表示します。JDK（Java Development Kit）がインストールされている場合、そのバージョンも含まれます。

また、特定のJDKのバージョンを調べたい場合には、そのJDKのbinディレクトリ内のjavaコマンドに対して上記のコマンドを実行します。例えば：

bash
/usr/local/jdk1.5.0_07/bin/java -version

このコマンドは、/usr/local/jdk1.5.0_07にインストールされたJDKのバージョン情報を表示します。これらのコマンドは、一般的なUnixベースのシステム（Linux、macOSなど）で使用できます。WindowsではコマンドプロンプトまたはPowerShellから同様のコマンドを実行できます。

### jdk1.5.0_07をインストールしないといけないことがわかった。

JDK 1.5.0_07の公式リリースはもう古く、現在はOracleの公式ウェブサイトから直接ダウンロードすることはできません。一部のサードパーティサイトは、これらの古いバージョンのJDKをホストしていることがありますが、それらのサイトからソフトウェアをダウンロードする際は注意が必要です。

また、あなたが管理者の権限を持っている企業や学校などの組織であれば、古いバージョンのJDKを保持しているかもしれません。必要なバージョンがあるかどうか確認してみてください。

もし可能であれば、新しいバージョンのJavaを使用することを検討してみてください。新しいバージョンは、セキュリティ修正、パフォーマンスの改善、新機能などが提供されています。

なお、OracleはJava SE 8以降のバージョンで新しいライセンスモデルを採用しており、商用利用する際にはライセンス購入が必要となります。無償でJavaを商用利用するには、OpenJDKというオープンソース版のJavaを使用することを検討してみてください。

以上の情報を参考に、適切な解決策を選択してください。なお、この情報は2021年9月までの情報に基づいています。現在はその後の変更があった可能性もありますので、最新の情報をご確認ください。

### 開発サーバにバイナリではないけど、同じバージョンがディレクトリとして存在しているのを確認した。そのままscpで持ってくるだけで使える？

実際にその方法が機能するかどうかは、いくつかの要素に依存します。一部のシステムでは、JDKを単純にコピーして別のマシンで使うことが可能ですが、依存関係や特定のシステム設定が必要な場合もあります。

具体的には以下の点を確認してみてください：

バイナリ互換性：古いマシンと新しいマシンの両方が同じアーキテクチャ（例：x86, x64, ARMなど）を使用していること。

依存関係：特定のシステムライブラリやツールに依存している場合、それらが新しいマシン上に存在し、適切なバージョンであること。

環境変数：JAVA_HOMEやPATHなどの環境変数が適切に設定されていること。

これらを確認した上で、scpやrsyncなどのツールを使用してJDKのディレクトリを新しいマシンにコピーします。そして、コピーが完了したら、新しいマシンでjava -versionコマンドを実行してJDKが正しく動作するか確認してみてください。

### Linuxのどこかにjdkのtarがないか検索したい。

Linuxシステム上で特定のファイルを検索するには、findコマンドを使うのが一般的です。以下のコマンドは、システム全体を検索し、名前がjdkを含むtarファイルを見つけるためのものです：

bash
sudo find / -name "*jdk*.tar*"

上記のコマンドを解説すると、findはファイルを検索するコマンド、/は検索を開始するディレクトリ（この場合はルートディレクトリから全てのディレクトリを検索します）、-nameは検索するファイルの名前を指定するオプション、"*jdk*.tar*"はjdkとtarを名前に含むファイルを検索します。なお、*は任意の文字列にマッチします。

このコマンドを実行するには通常、ルート権限（sudo）が必要です。これは、システムの全てのディレクトリを検索するためです。ただし、システムの一部のディレクトリに対するアクセス権限が制限されている場合は、そのディレクトリにはアクセスできません。

### Javaがパス通ってるか確認したい

Javaがパスに設定されているかを確認するには、以下のコマンドを実行します：

bash
which java

このコマンドは、javaという名前のコマンドがシステムのPATHにある場合にそのパスを表示します。javaがPATHに設定されていない場合、何も表示されません。

さらに、Javaのバージョンを確認したい場合は、以下のコマンドを実行します：

bash
java -version

これにより、Javaのバージョン情報が表示されます。これらのコマンドは、Linux、macOS、およびWindowsのコマンドプロンプトやPowerShellで動作します。

二つのサーバの環境をwhichで調べたら/usr/lib/jvm以下と/usr/local/binでJavaの位置が別れていた

whichコマンドが返すパスは、シェルが実行可能ファイルを探す順序（PATH環境変数によって決まる）に基づいています。つまり、あるサーバでは/usr/lib/jvm下のJavaが先に見つかり、もう一方のサーバでは/usr/local/bin下のJavaが先に見つかっているということです。

Javaのインストール方法やバージョンにより、その配置される場所は変わります。また、システムによっては、複数バージョンのJavaが異なる場所にインストールされていることもあります。

/usr/lib/jvmは一般的にはJavaのバージョン毎にディレクトリが作成され、その中にJDKやJREが配置されます。それに対して/usr/local/binは、一般的にユーザーが自分でインストールした（またはシステムが自動的にインストールした）ソフトウェアの実行ファイルが配置される場所です。このディレクトリにあるjavaコマンドは、おそらくあるバージョンのJavaへのシンボリックリンク（別の場所にある実行ファイルへの参照）でしょう。

必要なJavaバージョンに対するパスを正しく設定するには、JAVA_HOME環境変数を適切に設定し、その値をPATH環境変数に追加することが一般的です。これにより、特定のJavaバージョンをデフォルトとして使うようにシステムに指示することができます。

### jvmディレクトリに違うバージョンのjdkが二つあってもいいの、

はい、それは全く問題ありません。同じシステム上に複数のJavaバージョン（JDK）をインストールすることは一般的なことです。これは、異なるアプリケーションが異なるJavaバージョンを要求するためによく行われます。

実際には、/usr/lib/jvmディレクトリ以下には通常、複数のJavaバージョン（JDKとJREの両方）がインストールされています。各バージョンは自身のサブディレクトリに格納されています。

ただし、同時に実行できるJavaバージョンは1つだけです。そのため、あるJavaバージョンをデフォルトとして設定するためには、JAVA_HOME環境変数とPATH環境変数を適切に設定する必要があります。これにより、システムは指定されたバージョンのJavaを使用するようになります。

### /usr/localからlibにシンボリックリンクをつけたい

指定したディレクトリから/usr/local/libへのシンボリックリンクを作成するには、lnコマンドの-sオプションを使います。以下のようにコマンドを実行します：

bash
sudo ln -s /path/to/your/directory /usr/local/lib/your_link_name

ここで、/path/to/your/directoryはシンボリックリンクの元となるディレクトリのパスを、your_link_nameは作成するシンボリックリンクの名前を指定します。このコマンドを実行するには通常、管理者（root）の権限が必要となります。

ただし、シンボリックリンクを作成する前に、既に同じ名前のファイルやディレクトリが/usr/local/libに存在しないか確認してください。もし存在する場合、そのファイルやディレクトリはシンボリックリンクによって上書きされます。

シンボリックリンクが正しく作成されたかを確認するには、ls -l /usr/local/libコマンドを実行します。これにより、/usr/local/libディレクトリ内のファイルとディレクトリの一覧が表示され、その中に作成したシンボリックリンクが表示されます。

#### error while loading shared libraries libjli.so cannot open shared object file no suchってエラーが出た

libjli.soが見つからない、または読み込めないというエラーメッセージは、Javaランタイムが必要とするライブラリがシステム上で見つからないことを示しています。

この問題の解決方法の一つは、libjli.soが存在するディレクトリへのパスをLD_LIBRARY_PATH環境変数に追加することです。libjli.soは通常、JDKのインストールディレクトリ内のlibサブディレクトリに存在します。以下のコマンドでLD_LIBRARY_PATH環境変数にこのパスを追加します：

bash

export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/path/to/your/jdk/lib

ここで、/path/to/your/jdk/libはlibjli.soが存在するディレクトリのパスを指定します。

ただし、この修正は一時的なもので、新たにシェルを開始するとこの設定は失われます。この設定を永続化するには、このコマンドを~/.bashrc、~/.bash_profile、~/.profileなどの適切なシェルの設定ファイルに追加します。

なお、この情報は一般的なガイダンスであり、具体的な解決策はシステムの具体的な状況によります。

## fastcgi

### fastcgiって何だっけ

FastCGIは、CGI (Common Gateway Interface) の高速な代替手段で、Webサーバとスクリプト間のデータの通信を可能にします。

CGI自体は非常に効果的なインターフェースでしたが、リクエストごとに新しいプロセスを開始するため、大量のリクエストを処理するとパフォーマンスが大きく低下するという問題がありました。

FastCGIは、この問題を解決するために設計されました。FastCGIは、リクエストを処理するために新しいプロセスを作成するのではなく、すでに実行中のプロセスを再利用します。これにより、FastCGIはCGIよりも優れたパフォーマンスを提供し、大量のリクエストをより効率的に処理することができます。

FastCGIは特に、動的なコンテンツを生成するためのスクリプト（例えば、PHPやRubyなど）を実行するために使用されます。Webサーバは、リクエストが来るたびに新しいプロセスを生成するのではなく、FastCGIプロセスマネージャを通じて実行中のプロセスにリクエストを送り、その結果をクライアントに返すことで、効率的にリクエストを処理します。
