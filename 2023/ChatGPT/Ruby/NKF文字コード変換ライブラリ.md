# 全角数値半角数値変換のNKFって何？

NKFは、Rubyの文字コード変換ライブラリの一部として存在するモジュールです。
NKFは"Network Kanji Filter"の略で、文字コードの変換や、全角と半角の変換など、日本語のテキスト処理に関連する機能を提供しています。

具体的には、NKF.nkfメソッドを使用して、文字列のコード変換や、全角数字を半角数字に変換することができます。

例:

```ruby
str = "１２３４５"
converted_str = NKF.nkf('-m0Z1', str)
puts converted_str # => "12345"
```

このコードでは、-m0Z1というオプションを指定して、全角数字を半角数字に変換しています。

ただし、Ruby on Railsの新しいバージョンでは、他の方法やgemを使用して同じことを実現することが多いです。
NKFは古いシステムや、特定の文字コード変換が必要な場合に使用されることが多いです。
Ruby 1.8の頃から存在しているので、古いコードベースでは見かけることがあるかもしれません。

## no output encoding givenのエラーが出る

no output encoding givenのエラーは、NKFを使用する際に出力エンコーディングを指定しないと発生します。

NKFを使用する際には、入力エンコーディングや出力エンコーディングを正しく指定する必要があります。
例えば、Shift_JISからUTF-8に変換する場合、以下のようにオプションを指定します：

```ruby
converted_str = NKF.nkf('-w', original_str)
```

ここで、-wはUTF-8への変換を意味します。

no output encoding givenのエラーが発生する場合、適切なオプションが指定されていないか、または不正なオプションが指定されている可能性があります。
正しいオプションを確認し、指定してみてください。

具体的には、全角数字を半角数字に変換する場合、以下のようにしてみてください：

```ruby
str = "１２３４５"
converted_str = NKF.nkf('-m0Z1 -w', str)
puts converted_str # => "12345"
```

ここで、-m0Z1は全角数字を半角数字に変換するオプション、-wは出力エンコーディングとしてUTF-8を指定するオプションです。
